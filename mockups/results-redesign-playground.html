<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Results Page — Interactive Playground</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --ui-bg: #111114;
    --ui-surface: #1a1a1f;
    --ui-border: #2a2a30;
    --ui-text: #e0e0e6;
    --ui-muted: #888892;
    --ui-accent: #6366f1;
    --ui-accent-dim: rgba(99,102,241,0.15);
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    background: var(--ui-bg);
    color: var(--ui-text);
    height: 100vh;
    overflow: hidden;
  }

  /* Shell layout */
  .app {
    display: grid;
    grid-template-columns: 300px 1fr;
    grid-template-rows: auto 1fr auto;
    height: 100vh;
  }

  .header {
    grid-column: 1 / -1;
    padding: 10px 20px;
    border-bottom: 1px solid var(--ui-border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--ui-surface);
  }
  .header h1 { font-size: 13px; font-weight: 700; letter-spacing: -0.01em; }
  .header .badge {
    font-size: 10px; background: var(--ui-accent-dim); color: var(--ui-accent);
    padding: 3px 10px; border-radius: 999px; font-weight: 600;
  }

  .controls {
    grid-row: 2 / 4;
    overflow-y: auto;
    border-right: 1px solid var(--ui-border);
    padding: 14px;
    background: var(--ui-surface);
  }

  .preview-area {
    overflow-y: auto;
    background: #F8FAFC;
  }

  .output-area {
    border-top: 1px solid var(--ui-border);
    background: var(--ui-surface);
    padding: 12px 20px;
    max-height: 220px;
    overflow-y: auto;
  }

  /* Controls */
  .ctrl-group { margin-bottom: 16px; }
  .ctrl-group-title {
    font-size: 9px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--ui-muted); margin-bottom: 8px;
  }
  .ctrl-row { margin-bottom: 10px; }
  .ctrl-label {
    display: flex; justify-content: space-between; align-items: center;
    font-size: 11px; margin-bottom: 3px; color: var(--ui-text);
  }
  .ctrl-value {
    font-family: 'SF Mono', 'Fira Code', monospace; font-size: 10px;
    color: var(--ui-accent); font-weight: 600;
  }
  input[type="range"] {
    width: 100%; height: 3px; -webkit-appearance: none; appearance: none;
    background: var(--ui-border); border-radius: 2px; outline: none; cursor: pointer;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none; width: 12px; height: 12px;
    background: var(--ui-accent); border-radius: 50%; cursor: pointer;
  }

  .preset-row { display: flex; gap: 4px; flex-wrap: wrap; margin-bottom: 12px; }
  .preset-btn {
    font-size: 10px; padding: 3px 8px; border-radius: 5px;
    border: 1px solid var(--ui-border); background: transparent;
    color: var(--ui-text); cursor: pointer; font-weight: 500; transition: all 0.15s;
  }
  .preset-btn:hover { border-color: var(--ui-accent); color: var(--ui-accent); }
  .preset-btn.active { background: var(--ui-accent-dim); border-color: var(--ui-accent); color: var(--ui-accent); }

  .toggle-row { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
  .toggle-switch {
    position: relative; width: 32px; height: 18px; background: var(--ui-border);
    border-radius: 9px; cursor: pointer; transition: background 0.2s; flex-shrink: 0;
  }
  .toggle-switch.on { background: var(--ui-accent); }
  .toggle-switch::after {
    content: ''; position: absolute; top: 2px; left: 2px;
    width: 14px; height: 14px; background: white; border-radius: 50%;
    transition: transform 0.2s;
  }
  .toggle-switch.on::after { transform: translateX(14px); }
  .toggle-label { font-size: 11px; }

  .ctrl-input {
    width: 100%; padding: 4px 8px; font-size: 11px;
    background: var(--ui-bg); border: 1px solid var(--ui-border);
    border-radius: 5px; color: var(--ui-text); outline: none;
  }
  .ctrl-input:focus { border-color: var(--ui-accent); }

  /* Output */
  .output-header {
    display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;
  }
  .output-title {
    font-size: 10px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.06em; color: var(--ui-muted);
  }
  .copy-btn {
    font-size: 10px; padding: 3px 10px; border-radius: 5px;
    border: 1px solid var(--ui-border); background: transparent;
    color: var(--ui-text); cursor: pointer; font-weight: 600; transition: all 0.15s;
  }
  .copy-btn:hover { border-color: var(--ui-accent); color: var(--ui-accent); }
  .copy-btn.copied { background: var(--ui-accent-dim); border-color: var(--ui-accent); color: var(--ui-accent); }
  .output-content {
    font-family: 'SF Mono', 'Fira Code', monospace;
    font-size: 11px; line-height: 1.6; color: var(--ui-text);
    white-space: pre-wrap; word-break: break-word;
  }

  /* ===== PREVIEW STYLES (faithful to real page) ===== */
  .page {
    font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    max-width: 64rem; /* max-w-5xl */
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .back-link {
    display: inline-flex; align-items: center; gap: 0.5rem;
    font-size: 0.875rem; color: #64748B; text-decoration: none;
    margin-bottom: 2rem;
  }
  .back-link:hover { color: #0F172A; }
  .back-link svg { width: 16px; height: 16px; }

  /* Hero card */
  .hero-card {
    background: #fff; border-radius: 1rem; box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    padding: 2.5rem; margin-bottom: 2rem;
    display: flex; align-items: center; gap: 2.5rem;
  }
  @media (max-width: 640px) {
    .hero-card { flex-direction: column; text-align: center; padding: 1.5rem; gap: 1.5rem; }
  }
  .score-ring {
    width: 160px; height: 160px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }
  .score-ring-inner {
    width: 128px; height: 128px; border-radius: 50%; background: #fff;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
  }
  .score-number {
    font-size: 3rem; font-weight: 900; letter-spacing: -0.04em;
    line-height: 1; color: #0F172A;
  }
  .score-label-text {
    font-size: 0.625rem; font-weight: 700; color: #94A3B8;
    text-transform: uppercase; letter-spacing: 0.12em; margin-top: 4px;
  }
  .hero-body { flex: 1; }
  .hero-headline {
    font-size: 1.5rem; font-weight: 800; color: #0F172A;
    letter-spacing: -0.02em; margin-bottom: 0.5rem;
  }
  .hero-summary {
    font-size: 0.875rem; color: #64748B; line-height: 1.6; margin-bottom: 1rem;
  }
  .hero-badge {
    display: inline-block; background: #EEF2FF; color: #4338CA;
    border-radius: 0.5rem; padding: 0.375rem 0.75rem;
    font-size: 0.875rem; font-weight: 600;
  }

  /* Layout section */
  .layout-section {
    margin-bottom: 2.5rem;
    margin-left: -1rem; margin-right: -1rem;
    padding: 0 1rem;
  }
  .layout-tabs {
    display: flex; justify-content: center; gap: 0; margin-bottom: 0.5rem;
  }
  .layout-tab {
    padding: 0.375rem 2rem; font-size: 0.875rem; font-weight: 500;
    background: #F1F5F9; border: 1px solid #E2E8F0; color: #64748B;
    cursor: pointer; transition: all 0.15s;
  }
  .layout-tab:first-child { border-radius: 0.375rem 0 0 0.375rem; }
  .layout-tab:last-child { border-radius: 0 0.375rem 0.375rem 0; }
  .layout-tab.active { background: #fff; color: #0F172A; border-color: #E2E8F0; box-shadow: 0 1px 2px rgba(0,0,0,0.06); z-index: 1; position: relative; }
  .layout-tab + .layout-tab { margin-left: -1px; }

  .browser-frame {
    position: relative;
    border-radius: 0.5rem; border: 1px solid #E2E8F0;
    overflow: hidden; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.06);
    background: rgba(0,0,0,0.02);
  }
  .browser-chrome {
    display: flex; align-items: center; gap: 6px;
    padding: 0.5rem 0.75rem; border-bottom: 1px solid #E2E8F0;
    background: rgba(0,0,0,0.03);
  }
  .browser-dot { width: 12px; height: 12px; border-radius: 50%; }
  .browser-viewport {
    height: 420px; display: flex; flex-direction: column;
    align-items: center; justify-content: center; gap: 12px;
    color: #94A3B8; font-size: 13px;
    background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
  }
  .mock-line { width: 60%; height: 8px; border-radius: 4px; background: rgba(148,163,184,0.15); }
  .mock-line.short { width: 35%; }
  .mock-block { width: 70%; height: 40px; border-radius: 8px; background: rgba(148,163,184,0.08); }

  /* Icy install button */
  .icy-btn {
    position: absolute; bottom: 1.5rem; right: 1.5rem; z-index: 10;
    padding: 0.75rem 1.5rem; border-radius: 0.75rem;
    font-size: 0.875rem; font-weight: 700; cursor: pointer;
    background: linear-gradient(135deg, #e0f7fa 0%, #80deea 50%, #4dd0e1 100%);
    color: #006064; border: 2px solid #80deea;
    box-shadow: 0 4px 14px rgba(77,208,225,0.4), 0 0 20px rgba(128,222,234,0.3);
    animation: icyPulse 2s ease-in-out infinite;
    overflow: hidden; transition: all 0.15s;
  }
  .icy-btn::before {
    content: ''; position: absolute; top: -50%; left: -50%;
    width: 200%; height: 200%;
    background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.4) 50%, transparent 70%);
    transform: rotate(45deg); animation: iceShimmer 3s ease-in-out infinite;
  }
  .icy-btn:hover {
    background: linear-gradient(135deg, #b2ebf2 0%, #4dd0e1 50%, #26c6da 100%);
    color: #004d40; transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(77,208,225,0.5), 0 0 30px rgba(128,222,234,0.5);
  }
  @keyframes icyPulse {
    0%, 100% { box-shadow: 0 4px 14px rgba(77,208,225,0.4), 0 0 20px rgba(128,222,234,0.3); }
    50% { box-shadow: 0 4px 20px rgba(77,208,225,0.6), 0 0 35px rgba(128,222,234,0.5), 0 0 50px rgba(224,247,250,0.3); }
  }
  @keyframes iceShimmer {
    0% { transform: translateX(-100%) rotate(45deg); }
    50%, 100% { transform: translateX(100%) rotate(45deg); }
  }

  .layout-actions {
    display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap;
  }
  .layout-select {
    height: 2.5rem; padding: 0 0.75rem; font-size: 0.875rem;
    border: 1px solid #E2E8F0; border-radius: 0.375rem;
    background: #fff; color: #0F172A; outline: none;
  }
  .layout-btn-outline {
    flex: 1; height: 2.5rem; display: inline-flex; align-items: center;
    justify-content: center; gap: 0.5rem; font-size: 0.875rem; font-weight: 500;
    border: 1px solid #E2E8F0; border-radius: 0.375rem;
    background: #fff; color: #0F172A; cursor: pointer; transition: all 0.15s;
  }
  .layout-btn-outline:hover { background: #F8FAFC; }
  .layout-btn-outline svg { width: 16px; height: 16px; }
  .layout-btn-primary {
    height: 2.5rem; padding: 0 1.25rem; font-size: 0.875rem; font-weight: 500;
    border: none; border-radius: 0.375rem;
    background: #0F172A; color: #fff; cursor: pointer; transition: all 0.15s;
  }
  .layout-btn-primary:hover { background: #1e293b; }

  /* Email CTA */
  .email-cta {
    position: relative; border-radius: 1.5rem; background: #0F172A;
    padding: 3rem; text-align: center; color: #fff;
    overflow: hidden; margin-bottom: 2.5rem;
  }
  .email-cta .glow1 {
    position: absolute; pointer-events: none;
    top: -50%; left: -20%; width: 60%; height: 120%;
    background: radial-gradient(ellipse, rgba(79,70,229,0.2), transparent 60%);
  }
  .email-cta .glow2 {
    position: absolute; pointer-events: none;
    bottom: -40%; right: -15%; width: 50%; height: 100%;
    background: radial-gradient(ellipse, rgba(6,182,212,0.15), transparent 60%);
  }
  .email-cta .cta-inner { position: relative; z-index: 1; }
  .email-cta h3 {
    font-size: 1.5rem; font-weight: 800; letter-spacing: -0.02em; margin-bottom: 0.5rem;
  }
  .email-cta .cta-desc {
    color: #94A3B8; font-size: 0.875rem; margin-bottom: 1.75rem;
  }
  .email-form {
    display: flex; max-width: 28rem; margin: 0 auto;
  }
  .email-input {
    flex: 1; padding: 0.75rem 1.25rem;
    background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
    color: #fff; border-radius: 0.75rem 0 0 0.75rem; outline: none;
    font-size: 0.875rem; font-weight: 500;
  }
  .email-input::placeholder { color: #64748B; }
  .email-input:focus { border-color: #6366f1; background: rgba(255,255,255,0.08); }
  .email-submit {
    padding: 0.75rem 1.5rem; background: #4F46E5; color: #fff;
    border: none; border-radius: 0 0.75rem 0.75rem 0;
    font-size: 0.875rem; font-weight: 700; cursor: pointer; white-space: nowrap;
    box-shadow: 0 0 24px rgba(79,70,229,0.4); transition: all 0.15s;
  }
  .email-submit:hover {
    background: #6366f1;
    box-shadow: 0 0 32px rgba(79,70,229,0.6); transform: translateY(-1px);
  }
  .email-success-check {
    font-size: 2.5rem; margin-bottom: 0.75rem;
  }
  .email-success-text { color: #94A3B8; font-size: 0.875rem; }
  .email-success-text strong { color: #fff; font-weight: 500; }

  /* Score by dimension */
  .section-heading {
    font-size: 1.125rem; font-weight: 700; color: #0F172A;
    letter-spacing: -0.01em; margin-bottom: 1rem;
  }
  .dim-grid {
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.75rem; margin-bottom: 2.5rem;
  }
  @media (max-width: 640px) { .dim-grid { grid-template-columns: repeat(2, 1fr); } }
  .dim-tile {
    background: #fff; border-radius: 1rem; padding: 1.25rem; text-align: center;
    box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    transition: transform 0.15s, box-shadow 0.15s; cursor: pointer;
  }
  .dim-tile:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
  .dim-score-val {
    font-size: 1.875rem; font-weight: 900; letter-spacing: -0.03em;
    line-height: 1; margin-bottom: 0.375rem;
  }
  .dim-label {
    font-size: 0.625rem; font-weight: 700; color: #64748B;
    text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.75rem;
  }
  .dim-bar { height: 4px; background: #F1F5F9; border-radius: 9999px; overflow: hidden; }
  .dim-bar-fill { height: 100%; border-radius: 9999px; transition: width 0.3s; }

  /* Collapsible sections */
  .collapsible-header {
    display: flex; align-items: center; gap: 0.5rem; width: 100%;
    text-align: left; font-size: 1.25rem; font-weight: 600; color: #0F172A;
    margin-bottom: 1rem; cursor: pointer; background: none; border: none;
    padding: 0; font-family: inherit;
  }
  .collapsible-header:hover { color: rgba(15,23,42,0.9); }
  .collapsible-header svg { width: 20px; height: 20px; color: #64748B; }
  .collapsible-body {
    border: 1px solid #E2E8F0; border-radius: 0.5rem;
    background: #fff; overflow: hidden; margin-bottom: 2.5rem;
  }
  .collapsible-inner { padding: 1rem; }

  /* Benchmark */
  .bench-summary { font-size: 0.875rem; color: #0F172A; margin-bottom: 1rem; }
  .bench-summary strong { font-weight: 700; }
  .bench-sample { font-size: 0.875rem; color: #64748B; margin-bottom: 1rem; }
  .bench-stat-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;
    font-size: 0.875rem; margin-bottom: 1rem;
  }
  .bench-stat-label { color: #64748B; }
  .bench-stat-value { font-weight: 500; }
  .bench-dim-title { font-size: 0.875rem; font-weight: 500; color: #64748B; margin-bottom: 0.5rem; }
  .bench-dim-row {
    display: flex; flex-wrap: wrap; align-items: center;
    gap: 1rem; font-size: 0.875rem; padding: 0.25rem 0;
  }
  .bench-dim-row.below-avg {
    background: rgba(239,68,68,0.08); border-radius: 0.25rem;
    padding: 0.25rem 0.5rem; margin: 0 -0.5rem;
  }
  .bench-dim-name { font-weight: 500; width: 6rem; text-transform: capitalize; }
  .bench-dim-muted { color: #64748B; }
  .bench-dim-warn { color: #EF4444; font-size: 0.75rem; }

  /* SEO Audit */
  .seo-check { display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; padding: 0.25rem 0; }
  .seo-check svg { width: 16px; height: 16px; flex-shrink: 0; }
  .seo-check .pass { color: #16A34A; }
  .seo-check .fail { color: #EF4444; }
  .seo-check .check-name { color: #0F172A; }
  .seo-check .check-msg { color: #64748B; margin-left: 0.25rem; }
  .seo-recs-title { font-size: 0.875rem; font-weight: 500; color: #64748B; margin: 1rem 0 0.5rem; }
  .seo-rec {
    font-size: 0.875rem; padding-left: 0.75rem; border-left: 2px solid;
    margin-bottom: 0.5rem;
  }
  .seo-rec.critical { border-color: #EF4444; color: #EF4444; }
  .seo-rec.warning { border-color: #F59E0B; color: #B45309; }
  .seo-rec.info { border-color: #64748B; color: #64748B; }
  .seo-rec .sev { font-weight: 500; text-transform: capitalize; margin-right: 0.25rem; }

  /* Install CTA */
  .install-cta {
    border: 2px dashed #E2E8F0; border-radius: 0.5rem; padding: 1.5rem;
    margin-bottom: 2.5rem;
  }
  .install-cta p { color: #64748B; font-size: 0.875rem; margin-bottom: 1rem; }
  .install-cta-btn {
    display: inline-block; padding: 0.5rem 1rem;
    border: 1px solid #E2E8F0; border-radius: 0.375rem;
    font-size: 0.875rem; color: #0F172A; cursor: pointer;
    background: #fff; font-weight: 500; transition: all 0.15s;
  }
  .install-cta-btn:hover { background: #F8FAFC; }

  /* Modal */
  .modal-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000;
    display: flex; align-items: center; justify-content: center;
    opacity: 0; pointer-events: none; transition: opacity 0.2s;
  }
  .modal-overlay.open { opacity: 1; pointer-events: auto; }
  .modal-dialog {
    background: #fff; border-radius: 0.75rem; padding: 1.75rem;
    width: 90%; max-width: 32rem; max-height: 80vh; overflow-y: auto;
    position: relative; font-family: Inter, -apple-system, sans-serif; color: #0F172A;
    box-shadow: 0 20px 60px rgba(0,0,0,0.2);
    transform: scale(0.95); transition: transform 0.2s;
  }
  .modal-overlay.open .modal-dialog { transform: scale(1); }
  .modal-close {
    position: absolute; top: 1rem; right: 1rem; width: 28px; height: 28px;
    border: 1px solid #E2E8F0; border-radius: 50%; background: #fff;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; font-size: 14px; color: #64748B; transition: all 0.15s;
  }
  .modal-close:hover { background: #F3F4F6; color: #0F172A; }
  .modal-title { font-size: 1.125rem; font-weight: 600; margin-bottom: 0.25rem; }
  .modal-score-text { font-weight: 600; font-variant-numeric: tabular-nums; margin-bottom: 1.25rem; }
  .modal-section-label { font-size: 0.8125rem; font-weight: 500; color: #64748B; margin-bottom: 0.5rem; }
  .modal-list {
    list-style: disc; padding-left: 1.25rem; margin-bottom: 1.25rem;
    font-size: 0.875rem; line-height: 1.6; color: #374151;
  }
  .modal-list li { margin-bottom: 2px; }
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <h1>Results Page — Playground</h1>
    <span class="badge">Live Preview</span>
  </div>

  <!-- Controls -->
  <div class="controls">
    <div class="ctrl-group">
      <div class="ctrl-group-title">Presets</div>
      <div class="preset-row">
        <button class="preset-btn" onclick="applyPreset('struggling')">Struggling</button>
        <button class="preset-btn active" onclick="applyPreset('mixed')">Mixed</button>
        <button class="preset-btn" onclick="applyPreset('strong')">Strong</button>
        <button class="preset-btn" onclick="applyPreset('excellent')">Excellent</button>
      </div>
    </div>

    <div class="ctrl-group">
      <div class="ctrl-group-title">Overall Score</div>
      <div class="ctrl-row">
        <div class="ctrl-label">
          <span>Score</span>
          <span class="ctrl-value" id="val-overall">62</span>
        </div>
        <input type="range" min="0" max="100" value="62" id="slider-overall" oninput="updateScore('overall', this.value)">
      </div>
    </div>

    <div class="ctrl-group">
      <div class="ctrl-group-title">Dimension Scores</div>
      <div id="dimension-controls"></div>
    </div>

    <div class="ctrl-group">
      <div class="ctrl-group-title">Benchmark</div>
      <div class="ctrl-row">
        <div class="ctrl-label">
          <span>Industry</span>
        </div>
        <input type="text" class="ctrl-input" id="input-industry" value="SaaS" oninput="state.industry=this.value;renderAll()">
      </div>
      <div class="ctrl-row">
        <div class="ctrl-label">
          <span>Percentile</span>
          <span class="ctrl-value" id="val-percentile">62</span>
        </div>
        <input type="range" min="1" max="99" value="62" id="slider-percentile" oninput="state.percentile=+this.value;document.getElementById('val-percentile').textContent=this.value;renderAll()">
      </div>
    </div>

    <div class="ctrl-group">
      <div class="ctrl-group-title">Toggles</div>
      <div class="toggle-row">
        <div class="toggle-switch on" id="toggle-badge" onclick="toggle('showBadge','toggle-badge')"></div>
        <span class="toggle-label">Percentile badge</span>
      </div>
      <div class="toggle-row">
        <div class="toggle-switch on" id="toggle-benchmark" onclick="toggle('showBenchmark','toggle-benchmark')"></div>
        <span class="toggle-label">Benchmark section</span>
      </div>
      <div class="toggle-row">
        <div class="toggle-switch on" id="toggle-seo" onclick="toggle('showSeo','toggle-seo')"></div>
        <span class="toggle-label">SEO audit</span>
      </div>
      <div class="toggle-row">
        <div class="toggle-switch" id="toggle-email-success" onclick="toggle('emailSuccess','toggle-email-success')"></div>
        <span class="toggle-label">Email CTA success state</span>
      </div>
    </div>
  </div>

  <!-- Preview -->
  <div class="preview-area">
    <div id="preview"></div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" id="dim-modal" onclick="if(event.target===this)closeModal()">
    <div class="modal-dialog">
      <button class="modal-close" onclick="closeModal()">&times;</button>
      <div class="modal-title" id="modal-title"></div>
      <div class="modal-score-text" id="modal-score"></div>
      <div id="modal-issues-wrap">
        <div class="modal-section-label">Issues</div>
        <ul class="modal-list" id="modal-issues"></ul>
      </div>
      <div id="modal-recs-wrap">
        <div class="modal-section-label">Recommendations</div>
        <ul class="modal-list" id="modal-recs"></ul>
      </div>
    </div>
  </div>

  <!-- Output -->
  <div class="output-area">
    <div class="output-header">
      <span class="output-title">Prompt Output</span>
      <button class="copy-btn" id="copy-btn" onclick="copyOutput()">Copy</button>
    </div>
    <div class="output-content" id="output"></div>
  </div>
</div>

<script>
// ===== DATA =====
const DIMS = [
  { key: 'clarity', short: 'Clarity', full: 'Clarity' },
  { key: 'visual', short: 'Visual', full: 'Visual Quality' },
  { key: 'hierarchy', short: 'Hierarchy', full: 'Information Hierarchy' },
  { key: 'trust', short: 'Trust', full: 'Trust & Credibility' },
  { key: 'conversion', short: 'Conversion', full: 'Conversion & Actionability' },
  { key: 'content', short: 'Content', full: 'Content Quality' },
  { key: 'mobile', short: 'Mobile', full: 'Mobile Experience' },
  { key: 'performance', short: 'Performance', full: 'Performance & Technical' },
];

const PRESETS = {
  struggling: { overall: 32, clarity: 25, visual: 38, hierarchy: 30, trust: 28, conversion: 22, content: 35, mobile: 40, performance: 33 },
  mixed:      { overall: 62, clarity: 70, visual: 55, hierarchy: 48, trust: 72, conversion: 45, content: 68, mobile: 60, performance: 58 },
  strong:     { overall: 76, clarity: 82, visual: 74, hierarchy: 78, trust: 80, conversion: 65, content: 76, mobile: 72, performance: 70 },
  excellent:  { overall: 91, clarity: 94, visual: 88, hierarchy: 90, trust: 92, conversion: 85, content: 90, mobile: 88, performance: 95 },
};

const MOCK_DETAILS = {
  clarity: {
    issues: ['No H1 tags found — critical for content hierarchy', 'Minimal navigation labels detected', 'Unclear primary message hierarchy'],
    recommendations: ['Add clear H1 tags to establish content hierarchy', 'Improve navigation structure with descriptive labels', 'Create clearer value proposition messaging'],
  },
  visual: {
    issues: ['Inconsistent color palette across sections', 'Low contrast between text and background in hero', 'Images lack consistent aspect ratios'],
    recommendations: ['Establish a unified color system with 3-5 brand colors', 'Ensure all text meets WCAG AA contrast ratios', 'Standardize image dimensions and aspect ratios'],
  },
  hierarchy: {
    issues: ['Multiple competing calls-to-action above the fold', 'Content sections lack visual separation', 'Footer contains critical navigation links buried in text'],
    recommendations: ['Prioritize a single primary CTA above the fold', 'Add spacing and visual dividers between sections', 'Move key links to the main navigation'],
  },
  trust: {
    issues: ['No visible social proof or testimonials', 'Missing SSL badge or trust indicators', 'Contact information hard to locate'],
    recommendations: ['Add testimonials or client logos near the CTA', 'Display security badges and certifications prominently', 'Place contact info in the header or a sticky bar'],
  },
  conversion: {
    issues: ['CTA button blends into surrounding content', 'No urgency or scarcity elements present', 'Form requires too many fields before submission'],
    recommendations: ['Use high-contrast, larger CTA buttons with action verbs', 'Add time-sensitive offers or limited availability badges', 'Reduce form to name and email for initial capture'],
  },
  content: {
    issues: ['Body copy is too long and lacks scannable structure', 'Headline does not communicate core benefit', 'Missing alt text on key images'],
    recommendations: ['Break body text into bullet points and short paragraphs', 'Rewrite headline to lead with customer benefit', 'Add descriptive alt text to all images'],
  },
  mobile: {
    issues: ['Tap targets are too small on mobile viewports', 'Horizontal scroll detected on screens < 375px', 'Font sizes below 14px on mobile'],
    recommendations: ['Ensure all tap targets are at least 44×44px', 'Fix overflow causing horizontal scroll on small screens', 'Set minimum body font size to 16px on mobile'],
  },
  performance: {
    issues: ['Largest Contentful Paint above 4 seconds', 'Unoptimized images account for 2.5 MB of page weight', 'Render-blocking CSS in the document head'],
    recommendations: ['Optimize hero image and lazy-load below-fold images', 'Convert images to WebP and serve responsive sizes', 'Inline critical CSS and defer non-critical stylesheets'],
  },
};

const SEO_CHECKS = [
  { check: 'Title tag present', pass: true, message: 'Found: "Acme Corp — Build Better"' },
  { check: 'Meta description', pass: true, message: '145 characters' },
  { check: 'H1 tag', pass: false, message: 'No H1 found on page' },
  { check: 'Image alt text', pass: false, message: '4 of 9 images missing alt text' },
  { check: 'Canonical URL', pass: true, message: 'Set correctly' },
  { check: 'Mobile viewport', pass: true, message: 'viewport meta tag present' },
  { check: 'HTTPS', pass: true, message: 'All resources loaded via HTTPS' },
  { check: 'robots.txt', pass: true, message: 'Found and valid' },
];

const SEO_RECS = [
  { severity: 'critical', message: 'Add an H1 tag — this is the single most important on-page SEO element.', check: 'H1 tag' },
  { severity: 'warning', message: 'Add alt text to remaining 4 images for accessibility and image search.', check: 'Image alt text' },
  { severity: 'info', message: 'Consider adding structured data (JSON-LD) for rich search results.', check: 'Structured data' },
];

// ===== STATE =====
const state = {
  overall: 62,
  dims: { clarity: 70, visual: 55, hierarchy: 48, trust: 72, conversion: 45, content: 68, mobile: 60, performance: 58 },
  activePreset: 'mixed',
  showBadge: true,
  showBenchmark: true,
  showSeo: true,
  emailSuccess: false,
  industry: 'SaaS',
  percentile: 62,
  benchmarkOpen: false,
  seoOpen: false,
};

// ===== HELPERS =====
function scoreColor(s) {
  if (s <= 40) return '#EF4444';
  if (s <= 60) return '#F59E0B';
  if (s <= 80) return '#10B981';
  return '#3B82F6';
}

function scoreHeadline(s) {
  if (s <= 40) return 'Needs work';
  if (s <= 60) return 'Room to grow';
  if (s <= 80) return 'Looking strong';
  return 'Excellent';
}

function buildSummary() {
  const sorted = [...DIMS].map(d => ({ ...d, score: state.dims[d.key] })).sort((a, b) => a.score - b.score);
  const l1 = sorted[0].full.toLowerCase();
  const l2 = sorted[1].full.toLowerCase();
  return `Your homepage has a solid foundation but underperforms in ${l1} and ${l2}. Our layout alternatives address these gaps directly.`;
}

function conicGrad(s) {
  const deg = (s / 100) * 360;
  return `conic-gradient(#4F46E5 0deg, #06B6D4 ${deg * 0.67}deg, #F59E0B ${deg}deg, #E2E8F0 ${deg}deg)`;
}

function percentileLabel(p) {
  if (p >= 90) return 'top 10%';
  if (p >= 80) return 'top 20%';
  if (p >= 70) return 'top 30%';
  if (p >= 60) return 'top 40%';
  if (p >= 50) return 'top 50%';
  if (p >= 40) return 'bottom 50%';
  if (p >= 30) return 'bottom 40%';
  if (p >= 20) return 'bottom 30%';
  if (p >= 10) return 'bottom 20%';
  return 'bottom 10%';
}

function chevronRight() { return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>'; }
function chevronDown() { return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>'; }
function arrowLeft() { return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>'; }
function checkIcon() { return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="pass"><path d="M20 6 9 17l-5-5"/></svg>'; }
function xIcon() { return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fail"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>'; }
function downloadIcon() { return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>'; }

// ===== INIT CONTROLS =====
function initControls() {
  const c = document.getElementById('dimension-controls');
  c.innerHTML = DIMS.map(d => `
    <div class="ctrl-row">
      <div class="ctrl-label">
        <span>${d.short}</span>
        <span class="ctrl-value" id="val-${d.key}">${state.dims[d.key]}</span>
      </div>
      <input type="range" min="0" max="100" value="${state.dims[d.key]}" id="slider-${d.key}" oninput="updateScore('${d.key}', this.value)">
    </div>
  `).join('');
}

// ===== UPDATES =====
function updateScore(key, val) {
  val = +val;
  if (key === 'overall') {
    state.overall = val;
    document.getElementById('val-overall').textContent = val;
  } else {
    state.dims[key] = val;
    document.getElementById(`val-${key}`).textContent = val;
  }
  state.activePreset = null;
  document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
  renderAll();
}

function applyPreset(name) {
  const p = PRESETS[name];
  state.overall = p.overall;
  state.activePreset = name;
  document.getElementById('slider-overall').value = p.overall;
  document.getElementById('val-overall').textContent = p.overall;
  for (const d of DIMS) {
    state.dims[d.key] = p[d.key];
    document.getElementById(`slider-${d.key}`).value = p[d.key];
    document.getElementById(`val-${d.key}`).textContent = p[d.key];
  }
  document.querySelectorAll('.preset-btn').forEach(b => b.classList.toggle('active', b.textContent.toLowerCase() === name));
  renderAll();
}

function toggle(key, elId) {
  state[key] = !state[key];
  document.getElementById(elId).classList.toggle('on', state[key]);
  renderAll();
}

function toggleBenchmark() { state.benchmarkOpen = !state.benchmarkOpen; renderAll(); }
function toggleSeo() { state.seoOpen = !state.seoOpen; renderAll(); }

// ===== MODAL =====
let openModalKey = null;
function openModal(key) { openModalKey = key; renderModal(); }
function closeModal() { openModalKey = null; renderModal(); }
function renderModal() {
  const overlay = document.getElementById('dim-modal');
  if (!openModalKey) { overlay.classList.remove('open'); return; }
  const dim = DIMS.find(d => d.key === openModalKey);
  const det = MOCK_DETAILS[openModalKey];
  const sc = state.dims[openModalKey];
  document.getElementById('modal-title').textContent = dim.full;
  const scoreEl = document.getElementById('modal-score');
  scoreEl.textContent = `${sc}/100`;
  scoreEl.style.color = scoreColor(sc);
  document.getElementById('modal-issues').innerHTML = det.issues.map(i => `<li>${i}</li>`).join('');
  document.getElementById('modal-recs').innerHTML = det.recommendations.map(r => `<li>${r}</li>`).join('');
  overlay.classList.add('open');
}

// ===== RENDER =====
function renderPreview() {
  const s = state.overall;
  const badge = state.showBadge
    ? `<span class="hero-badge">Top ${state.percentile}th percentile in ${state.industry}</span>` : '';

  const dimTiles = DIMS.map(d => {
    const sc = state.dims[d.key]; const c = scoreColor(sc);
    return `<div class="dim-tile" onclick="openModal('${d.key}')">
      <div class="dim-score-val" style="color:${c}">${sc}</div>
      <div class="dim-label">${d.short}</div>
      <div class="dim-bar"><div class="dim-bar-fill" style="width:${sc}%;background:${c}"></div></div>
    </div>`;
  }).join('');

  // Benchmark per-dimension data (mock: industry avg = random-ish near 55-70, top10 near 85-95)
  const benchDims = DIMS.map(d => {
    const avg = Math.round(50 + Math.abs(d.key.charCodeAt(0) % 20));
    const top10 = Math.round(80 + Math.abs(d.key.charCodeAt(1) % 15));
    const userVal = state.dims[d.key];
    const below = userVal < avg - 20;
    return `<div class="bench-dim-row${below ? ' below-avg' : ''}">
      <span class="bench-dim-name">${d.key}</span>
      <span>You: ${userVal}</span>
      <span class="bench-dim-muted">Avg: ${avg}</span>
      <span class="bench-dim-muted">Top 10%: ${top10}</span>
      ${below ? '<span class="bench-dim-warn">Below average</span>' : ''}
    </div>`;
  }).join('');

  const industryAvg = Math.round(50 + state.industry.charCodeAt(0) % 15);
  const top10 = Math.round(82 + state.industry.charCodeAt(0) % 10);

  const benchmarkSection = state.showBenchmark ? `
    <section style="margin-bottom:2.5rem">
      <button class="collapsible-header" onclick="toggleBenchmark()">
        ${state.benchmarkOpen ? chevronDown() : chevronRight()}
        Industry benchmark
      </button>
      ${state.benchmarkOpen ? `<div class="collapsible-body"><div class="collapsible-inner">
        <p class="bench-summary">Your site ranks in the <strong>${percentileLabel(state.percentile)}</strong> for ${state.industry}.</p>
        <p class="bench-sample">Based on 247 ${state.industry} websites.</p>
        <div class="bench-stat-grid">
          <div><div class="bench-stat-label">Your overall</div><div class="bench-stat-value">${s}/100</div></div>
          <div><div class="bench-stat-label">Industry avg</div><div class="bench-stat-value">${industryAvg}/100</div></div>
          <div><div class="bench-stat-label">Top 10%</div><div class="bench-stat-value">${top10}/100</div></div>
        </div>
        <div class="bench-dim-title">By dimension</div>
        ${benchDims}
      </div></div>` : ''}
    </section>` : '';

  const seoChecks = SEO_CHECKS.map(c => `
    <div class="seo-check">
      ${c.pass ? checkIcon() : xIcon()}
      <span class="check-name">${c.check}</span>
      <span class="check-msg">${c.message}</span>
    </div>`).join('');
  const seoRecs = SEO_RECS.map(r => `
    <div class="seo-rec ${r.severity}">
      <span class="sev">${r.severity}:</span> ${r.message}
    </div>`).join('');

  const seoSection = state.showSeo ? `
    <section style="margin-bottom:2.5rem">
      <button class="collapsible-header" onclick="toggleSeo()">
        ${state.seoOpen ? chevronDown() : chevronRight()}
        SEO Audit
      </button>
      ${state.seoOpen ? `<div class="collapsible-body"><div class="collapsible-inner">
        <div>${seoChecks}</div>
        <div class="seo-recs-title">Recommendations</div>
        ${seoRecs}
      </div></div>` : ''}
    </section>` : '';

  const emailContent = state.emailSuccess
    ? `<div class="cta-inner">
        <div class="email-success-check">&#10003;</div>
        <h3>Check your inbox</h3>
        <p class="email-success-text">We'll send your full scorecard breakdown to <strong>you@company.com</strong>.</p>
       </div>`
    : `<div class="cta-inner">
        <h3>Get your full scorecard</h3>
        <p class="cta-desc">Enter your email and we'll send you the complete dimension breakdown with actionable recommendations.</p>
        <div class="email-form">
          <input type="email" class="email-input" placeholder="you@company.com" disabled>
          <button class="email-submit" disabled>Send My Results</button>
        </div>
       </div>`;

  document.getElementById('preview').innerHTML = `
    <div class="page">
      <!-- Back link -->
      <a href="#" class="back-link" onclick="event.preventDefault()">
        ${arrowLeft()}
        Back to home
      </a>

      <!-- Score Hero Card -->
      <div class="hero-card">
        <div class="score-ring" style="background:${conicGrad(s)}">
          <div class="score-ring-inner">
            <div class="score-number">${s}</div>
            <div class="score-label-text">Overall</div>
          </div>
        </div>
        <div class="hero-body">
          <div class="hero-headline">${scoreHeadline(s)}</div>
          <p class="hero-summary">${buildSummary()}</p>
          ${badge}
        </div>
      </div>

      <!-- Layout Section -->
      <div class="layout-section">
        <div class="layout-tabs">
          <div class="layout-tab active">Layout 1</div>
          <div class="layout-tab">Layout 2</div>
          <div class="layout-tab">Layout 3</div>
        </div>
        <div class="browser-frame">
          <div class="browser-chrome">
            <div style="display:flex;gap:6px">
              <div class="browser-dot" style="background:rgba(239,68,68,0.8)"></div>
              <div class="browser-dot" style="background:rgba(245,158,11,0.8)"></div>
              <div class="browser-dot" style="background:rgba(34,197,94,0.8)"></div>
            </div>
          </div>
          <div class="browser-viewport">
            <div class="mock-line"></div>
            <div class="mock-line short"></div>
            <div class="mock-block"></div>
            <div class="mock-line"></div>
            <div class="mock-line short"></div>
            <div style="font-size:11px;color:#94a3b8;margin-top:8px;">Layout preview area</div>
          </div>
          <button class="icy-btn">Install This Layout</button>
        </div>
        <div class="layout-actions">
          <select class="layout-select">
            <option>HTML/CSS</option>
            <option>WordPress</option>
            <option>Squarespace</option>
            <option>Wix</option>
          </select>
          <button class="layout-btn-outline">${downloadIcon()} Download</button>
          <button class="layout-btn-primary">Select This Layout</button>
        </div>
      </div>

      <!-- Email CTA -->
      <div class="email-cta">
        <div class="glow1"></div>
        <div class="glow2"></div>
        ${emailContent}
      </div>

      <!-- Score by dimension -->
      <section style="margin-bottom:2.5rem">
        <h2 class="section-heading">Score by dimension</h2>
        <div class="dim-grid">${dimTiles}</div>
      </section>

      <!-- Industry benchmark -->
      ${benchmarkSection}

      <!-- SEO Audit -->
      ${seoSection}

      <!-- Install CTA -->
      <div class="install-cta">
        <p>Want us to install your chosen layout? +$250 — we'll handle the setup and you get a 15-minute install call.</p>
        <button class="install-cta-btn">Request installation</button>
      </div>
    </div>`;
}

function updateOutput() {
  const s = state.overall;
  const sorted = [...DIMS].map(d => ({ ...d, score: state.dims[d.key] })).sort((a, b) => a.score - b.score);
  const low1 = sorted[0].full.toLowerCase();
  const low2 = sorted[1].full.toLowerCase();

  const parts = [];
  parts.push(`Results page for a site scoring ${s}/100 overall.`);
  parts.push(`Headline: "${scoreHeadline(s)}". Weakest dimensions: ${low1} (${sorted[0].score}) and ${low2} (${sorted[1].score}).`);

  if (state.showBadge) {
    parts.push(`Percentile badge: "Top ${state.percentile}th percentile in ${state.industry}".`);
  }

  const dimSummary = DIMS.map(d => `${d.short}: ${state.dims[d.key]}`).join(', ');
  parts.push(`Dimension scores — ${dimSummary}.`);

  if (state.showBenchmark) parts.push(`Industry benchmark section visible (${state.industry}, ${percentileLabel(state.percentile)}).`);
  if (state.showSeo) parts.push(`SEO audit section visible.`);
  parts.push(`Email CTA: ${state.emailSuccess ? 'success state' : 'idle (form visible)'}.`);

  document.getElementById('output').textContent = parts.join('\n');
}

function copyOutput() {
  navigator.clipboard.writeText(document.getElementById('output').textContent).then(() => {
    const btn = document.getElementById('copy-btn');
    btn.textContent = 'Copied!'; btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 1500);
  });
}

function renderAll() { renderPreview(); updateOutput(); }

// ===== BOOT =====
initControls();
renderAll();
</script>
</body>
</html>
